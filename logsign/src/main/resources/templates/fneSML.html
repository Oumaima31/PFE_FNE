<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fiche de Notification d'Evénement (FNE)</title>
    <link rel="stylesheet" href="/css/styles.css">
    <!-- Ajoutez cette ligne dans le <head> pour utiliser FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header class="navbar">
        <!-- Section météo à gauche -->
        <div id="meteo">
            <span id="meteo-icon"></span>
            <span id="meteo-temp"></span>
            <span id="meteo-description"></span>
        </div>
        <div id="real-time">
            <span id="current-date"></span>
            <span id="current-time"></span>
        </div>
        <!-- Ajoutez ce bouton pour les écrans mobiles -->
        <button class="navbar-toggle" onclick="toggleNavbar()">
            <span></span>
            <span></span>    
        </button>
        <nav class="navbar-container">
            <a class="navbar-item" href="/auth/historiqueSML">
                <i class="fas fa-history"></i>
                <span>Historique des FNE</span>
            </a>
        </nav>
    </header>
    
    
    <div id="notification" class="notification">
        <span th:if="${message}" th:text="${message}" style="color: green;"></span>
        <span th:if="${error}" th:text="${error}" style="color: red;"></span>
    </div>
    <div class="form-container">
        <div class="title-container">
            <img src="/image/oaca.jpg" alt="Logo"> 
            <h1>Fiche de Notification d'Evénement (FNE)</h1>
        </div>
        <br><br><br>
        

        
        
        <!-- IMPORTANT: Form with method POST and action to submit FNE -->
        <form action="/auth/submitFNE" method="POST">
            <div class="section">
                <!-- 4 types d'événements -->
                <label for="type_evt">Type d'événement :</label>
                <select id="type_evt" name="type_evt" onchange="updateRefGneNumber()">
                    <option value="">Sélectionnez un type</option>
                    <option value="accident">Accident (ACCID)</option>
                    <option value="incident_grave">Incident grave (ING)</option>
                    <option value="incident">Incident (INC)</option>
                    <option value="evt_technique">Evenement Technique (EVT)</option>
                </select>
        
                <label for="REF_GNE">REF GNE :</label>
                <select id="REF_GNE" name="REF_GNE">
                    <!-- Les options seront générées dynamiquement par JavaScript -->
                </select>
            </div>
            <!-- Section 1: Informations générales -->
            <section>
                <h2>1. Informations générales / معلومات عامة</h2>
                <table>
                    <tr>
                        <td>1.1 Organisme concerné</td>
                        <td><input type="text" name="Organisme_concerné" id="Organisme_concerné"></td>
                    </tr>
                    <tr>
                        <td>1.2 Date</td>
                        <td><input type="date" name="Date" id="Date"></td>
                    </tr>
                    <tr>
                        <td>1.3 Heure UTC</td>
                        <td><input type="time" name="heure_UTC" id="heure_UTC"></td>
                    </tr>
                    
                    <tr>
                        <td>1.4 Lieu de l'événement</td>
                        <td><input type="text" name="Lieu_EVT" id="Lieu_EVT"></td>
                    </tr>
                    <tr>
                        <td>1.5 Moyen de détection</td>
                        <td><input type="text" name="moyen_detection" id="moyen_detection"></td>
                    </tr>
                    <tr>
                        <td>1.6 Impacts opérationnels</td>
                        <td><input type="text" name="impacts_operationnels" id="impacts_operationnels"></td>
                    </tr>
                </table>
            </section>

            <!-- Section 2: Aéronef(s) concerné(s) -->
            <section>
                <h2>2. Aéronef(s) concerné(s)/الطارات المعنية</h2>
                <table>
                    <tr>
                        <th>Indicatif et immatricultion</th>
                        <th>Code SSR</th>
                        <th>Type appareil</th>
                        <th>Règles de vol</th>
                        <th>Terrain départ </th>
                        <th>Terrain arrivée</th>
                        <th>Cap</th>
                        <th>Altitude/FL réel</th>
                        <th>Altitude/FL autorisé</th>
                        <th>Vitesse</th>
                    </tr>
                    <tr>
                        <td><input type="text" name="Indicatif_immatricultion" id="Indicatif_immatricultion"></td>
                        <td><input type="text" name="code_ssr" id="code_ssr"></td>
                        <td><input type="text" name="type_appareil" id="type_appareil"></td>
                        <td><select name="regles_vol" id="regles_vol">
                            <option value="IFR">IFR</option>
                            <option value="VFR">VFR</option>
                            <option value="IFR/VFR">IFR/VFR</option>
                            <option value="VFR/IFR">VFR/IFR</option>   
                        </select></td>
                        <td><input type="text" name="terrain_depart" id="terrain_depart"></td>
                        <td><input type="text" name="terrain_arrivée" id="terrain_arrivée"></td>
                        <td><input type="text" name="cap" id="cap"></td>
                        <td><input type="text" name="altitude_reel" id="altitude_reel"></td>
                        <td><input type="text" name="altitude_autorise" id="altitude_autorise"></td>
                        <td><input type="text" name="vitesse" id="vitesse"></td>
                    </tr>
                </table>
            </section>

            <!-- Section 3: Nombre de victimes -->
            <section>
                <h2>3. Nombre estimatif des victimes (si disponible) / عدد الضحايا</h2>
                <table>
                    <tr>
                        <th>Passagers</th>
                        <th>Personnel</th>
                        <th>Equipage</th>
                        <th>Autre</th>
                    </tr>
                    <tr>
                        <td><input type="number" name="passagers" id="passagers"></td>
                        <td><input type="number" name="personnel" id="personnel"></td>
                        <td><input type="number" name="equipage" id="equipage"></td>
                        <td><input type="number" name="autre" id="autre"></td>
                    </tr>
                </table>
            </section>

            <!-- Section 4: Conditions météorologiques -->
            <section>
                <h2>4. Conditions météorologiques / الأحوال الجوية</h2>
                <table>
                    <tr>
                        <th>Vent</th>
                        <th>Visibilité</th>
                        <th>Nébulosité</th>
                        <th>Précipitation</th>
                        <th>Autres phénomènes</th>
                    </tr>
                    <tr>
                        <td>
                            <label>Direction: <input type="text" name="vent_direction" id="vent_direction"></label><br>
                            <label>Vitesse: <input type="text" name="vent_vitesse" id="vent_vitesse"></label>
                        </td>
                        <td><input type="number" name="visibilite" id="visibilite"></td>
                        <td>
                            <select name="nebulosite" id="nebulosite">
                                <option value="BKN">BKN</option>
                                <option value="SCT">SCT</option>
                                <option value="FEW">FEW</option>
                                <option value="SKC">SKC</option>
                                <option value="CB">CB</option>
                            </select>
                        </td>
                        <td>
                            <select name="precipitation" id="precipitation">
                                <option value="Pluie">Pluie</option>
                                <option value="Grêle">Grêle</option>
                                <option value="Neige">Neige</option>
                            </select>
                        </td>
                        <td><input type="text" name="autres_phenomenes" id="autres_phenomenes"></td>
                    </tr>
                </table>
            </section>

            <!-- Section 5: Matériel, installation ou équipement -->
            <section>
                <h2>5. Matériel, installation ou équipement / معدات أو تجهيزات أو أجهزة</h2>
                <table>
                    <tr>
                        <td>L'événement implique une installation/équipement</td>
                        <td>
                            <label><input type="radio" name="evt_implique_installation_équipement" value="true"> Oui</label>
                            <label><input type="radio" name="evt_implique_installation_équipement" value="false" checked> Non</label>
                        </td>
                    </tr>
                    <tr>
                        <td>Le type de l'installation ou de l'équipement</td>
                        <td><input type="text" name="type_installation_équipement" id="type_installation_équipement"></td>
                    </tr>
                    <tr>
                        <td>Le nom de la compagnie d'assistance / organisme exploitant le véhicule</td>
                        <td><input type="text" name="nom_compagnie_assistance_organisme_exploitant_véhicule" id="nom_compagnie_assistance_organisme_exploitant_véhicule"></td>
                    </tr>
                    <tr>
                        <td>L'événement implique un véhicule ou un matériel d'assistance au sol</td>
                        <td>
                            <label><input type="radio" name="evt_implique_véhicule_materiel_assistance_sol" value="true"> Oui</label>
                            <label><input type="radio" name="evt_implique_véhicule_materiel_assistance_sol" value="false" checked> Non</label>
                        </td>
                    </tr>
                    <tr>
                        <td>Type du matériel / véhicule</td>
                        <td><input type="text" name="type_materiel_véhicule" id="type_materiel_véhicule"></td>
                    </tr>
                </table>
            </section>

            <!-- Section 6: Description de l'événement -->
            <section>
                <h2>6. Description de l'événement (croquis si nécessaire) / وصف الحدث</h2>
                <textarea name="description_evt" rows="10" cols="100" id="description_evt"></textarea>
            </section>

            <!-- Section 7: Nom et signature -->
            <section>
                <h2>7. Nom du (ou des) rédacteur(s)</h2>                
                <input type="text" name="nom_rédacteur" id="nom_rédacteur">                 
            </section>
            
            <!-- IMPORTANT: Add the submit button INSIDE the form -->
            <div class="button-container">
                <button type="submit">Soumettre</button>
            </div>
        </form>
    </div>
       
    <script src="/js/script.js"></script>
    <script>
        // Mettre à jour la date et l'heure toutes les secondes
        setInterval(updateDateTime, 1000);
        // Afficher la date et l'heure immédiatement au chargement de la page
        updateDateTime();
        //Afficher Meteo
        fetchMeteo();
    </script>

</body>
<footer class="footer">
    <div class="footer-content">
        <p>
            La Fiche de Notification d'Evénement (FNE) est un document utilisé pour signaler et enregistrer les événements liés à la sécurité aérienne. Elle permet de collecter des informations précises pour analyser et prévenir les incidents futurs.
        </p>
        <div class="contact-info">
            <p>
                 <!-- Icône WhatsApp -->
                Contactez-nous sur WhatsApp : <i class="fab fa-whatsapp"></i><a href="https://wa.me/1234567890" target="_blank">+123 456 7890</a>
            </p>
            <p>
                 <!-- Icône site web -->
                Visitez le site web de l'OACA : <i class="fas fa-globe"></i><a href="https://www.oaca.nat.tn/" target="_blank">www.oaca.ma</a>
            </p>
        </div>
    </div>
</footer>
</html>

